(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const g=document.querySelector("[data-js-error]"),L=()=>{g.classList.add("show"),setTimeout(()=>{g.classList.remove("show")},3e3)},I="a1acc6cf8281413798190228231711",O="Saint-Petersburg";async function E(t,e=!1){try{const r=await fetch(`https://api.weatherapi.com/v1/forecast.json?key=${I}&q=${t}&days=10&aqi=no`,{mode:"cors"});if(!r.ok){if(r.status===400&&!e)return L(),E(O);throw new Error(`HTTP error! status: ${r.status}`)}return r.json()}catch(r){console.log("WeatherAPI has error: ",r.message)}return null}async function M(t){return await E(t)}class S{constructor(){this.weatherInfo=null}getWeatherJSON(){return this.weatherInfo}getLocation(){return this.weatherInfo.location.name}getDays(){return this.weatherInfo.forecast.forecastday}getLowestTemperatureOf10Days(){const e=this.weatherInfo.forecast.forecastday;return e.reduce((o,n)=>Math.min(o,n.day.mintemp_c),e[0].day.mintemp_c)}getHighestTemperatureOf10Days(){const e=this.weatherInfo.forecast.forecastday;return e.reduce((o,n)=>Math.max(o,n.day.maxtemp_c),e[0].day.maxtemp_c)}getCurrentDayTemperature(){return this.weatherInfo.current.temp_c}getMinTemperature(e){return this.weatherInfo.forecast.forecastday[e].day.mintemp_c}getMaxTemperature(e){return this.weatherInfo.forecast.forecastday[e].day.maxtemp_c}getWeatherCondition(){return this.weatherInfo.current.condition.text}getWeatherHourArray(){return this.weatherInfo.forecast.forecastday[0].hour}async init(e){this.weatherInfo=await M(e)}}const W=document.querySelector("[data-js-location]"),q=document.querySelector("[data-js-temperature]"),_=document.querySelector("[data-js-condition]"),$=document.querySelector("[data-js-max]"),j=document.querySelector("[data-js-min]"),T=document.querySelector("[data-js-hours-container]"),w=document.querySelector("[data-js-days-container]"),A={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},H=()=>new Date().getHours(),N=t=>{const e=t.split(" ")[1].split(":");return parseInt(e,10)},P=t=>t.day.maxtemp_c,v=t=>t.day.mintemp_c,b=t=>{const e=new Date(t.date),r=new Date;return e.getDate()===r.getDate()?"Today":A[e.getDay()].slice(0,3)},F=t=>t.day.condition.icon,J=()=>{w.replaceChildren(),T.replaceChildren()};function K(t){const e=t.getWeatherHourArray(),r=H();e.forEach(o=>{const n=N(o.time);if(n<r)return;const a=document.createElement("div");a.classList.add("hour-card");const s=document.createElement("p");s.textContent=n===r?"Now":n,s.classList.add("time");const i=new Image;i.src=`${o.condition.icon}`,i.classList.add("icon");const c=document.createElement("p");c.textContent=`${Math.round(o.temp_c)}°`,c.classList.add("temperature"),[s,i,c].forEach(d=>{a.appendChild(d)}),T.appendChild(a)})}function R(t){const e=t.getLowestTemperatureOf10Days(),r=t.getHighestTemperatureOf10Days();t.getDays().forEach(n=>{const a=b(n),s=F(n),i=P(n),c=v(n),d=document.createElement("div");d.classList.add("day");const u=document.createElement("p");u.classList.add("day-name"),u.textContent=a;const h=new Image;h.src=s;const l=document.createElement("div");l.classList.add("temp-scale");const f=document.createElement("p");f.textContent=`${Math.round(c)}°`;const p=document.createElement("p");p.textContent=`${Math.round(i)}°`;const m=document.createElement("span");m.classList.add("line");const D=(i-c)/(r-e)*100,x=(c-e)/(r-e)*100;m.style.setProperty("--width",`${D}%`),m.style.setProperty("--margin-left",`${x}%`),[f,m,p].forEach(y=>{l.appendChild(y)}),[u,h,l].forEach(y=>{d.appendChild(y)}),w.appendChild(d)})}function U(t){W.textContent=t.getLocation(),_.textContent=t.getWeatherCondition(),q.textContent=`${Math.round(t.getCurrentDayTemperature())}°`,$.textContent=`${Math.round(t.getMaxTemperature(0))}°`,j.textContent=`${Math.round(t.getMinTemperature(0))}°`}async function C(t){const e=new S;await e.init(t),console.log(e.getWeatherJSON()),J(),U(e),K(e),R(e)}const B="Saint-Petersburg",Y=document.querySelector("[data-js-submit-button]"),z=document.querySelector("[data-js-input]");C(B);Y.addEventListener("click",()=>{const{value:t}=z;C(t)});
